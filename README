Comparing files table from pseudo/files.db shows that the main.js and main.js.map files weren't intercepted by pseudo when being created in $D, only when packaging later

com.webos.app.minimal $ diff -uNr 1.0-nodejs-*/pseudo/files.txt | grep main.js                                                                                     
-3|/OE/lge/build/webos/nanbield/BUILD/work/raspberrypi4_64-webos-linux/com.webos.app.minimal/1.0/image/test/main.js|66307|194846720|0|0|33188|0|0                                                                                             
-4|/OE/lge/build/webos/nanbield/BUILD/work/raspberrypi4_64-webos-linux/com.webos.app.minimal/1.0/image/test/main.js.map|66307|194846966|0|0|33188|0|0                                                                                         
-12|/OE/lge/build/webos/nanbield/BUILD/work/raspberrypi4_64-webos-linux/com.webos.app.minimal/1.0/package/test/main.js.map|66307|200603007|0|0|33188|0|0                                                                                      
-13|/OE/lge/build/webos/nanbield/BUILD/work/raspberrypi4_64-webos-linux/com.webos.app.minimal/1.0/package/test/main.js|66307|200603008|0|0|33188|0|0                                                                                          
-23|/OE/lge/build/webos/nanbield/BUILD/work/raspberrypi4_64-webos-linux/com.webos.app.minimal/1.0/packages-split/com.webos.app.minimal/test/main.js.map|66307|200603007|0|0|33188|0|0                                                         
-24|/OE/lge/build/webos/nanbield/BUILD/work/raspberrypi4_64-webos-linux/com.webos.app.minimal/1.0/packages-split/com.webos.app.minimal/test/main.js|66307|200603008|0|0|33188|0|0                                                             
+8|/OE/lge/build/webos/nanbield/BUILD/work/raspberrypi4_64-webos-linux/com.webos.app.minimal/1.0/package/test/main.js.map|66307|200937767|1026|1026|33188|0|0                                                                                 
+9|/OE/lge/build/webos/nanbield/BUILD/work/raspberrypi4_64-webos-linux/com.webos.app.minimal/1.0/package/test/main.js|66307|200937768|1026|1026|33188|0|0                                                                                     
+19|/OE/lge/build/webos/nanbield/BUILD/work/raspberrypi4_64-webos-linux/com.webos.app.minimal/1.0/packages-split/com.webos.app.minimal/test/main.js.map|66307|200937767|1026|1026|33188|0|0                                                   
+20|/OE/lge/build/webos/nanbield/BUILD/work/raspberrypi4_64-webos-linux/com.webos.app.minimal/1.0/packages-split/com.webos.app.minimal/test/main.js|66307|200937768|1026|1026|33188|0|0

Or better seen when both WORKDIRs are saved after running only do_install:

martin@jama /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal $ sqlite3 1.0-nodejs-18-install/pseudo/files.db "select * from files" > 1.0-nodejs-18-install/pseudo/files.txt
martin@jama /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal $ sqlite3 1.0-nodejs-20-install/pseudo/files.db "select * from files" > 1.0-nodejs-20-install/pseudo/files.txt

martin@jama /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal $ diff -uNr 1.0-nodejs-*-install/pseudo/files.txt
--- 1.0-nodejs-18-install/pseudo/files.txt      2023-10-17 20:21:43.327495762 +0200
+++ 1.0-nodejs-20-install/pseudo/files.txt      2023-10-17 20:21:53.865494633 +0200
@@ -1,5 +1 @@
-1|/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image|66305|52571009|0|0|16877|0|0
-2|/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test|66305|52571011|0|0|16877|0|0
-3|/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/main.js|66305|52571020|0|0|33188|0|0
-4|/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/main.js.map|66305|52571021|0|0|33188|0|0
-5|/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/index.html|66305|52571022|0|0|33188|0|0
+1|/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image|66305|52170186|0|0|16877|0|0

martin@jama /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal $ grep index.html 1.0-nodejs-*-install/temp/log.do_install
1.0-nodejs-18-install/temp/log.do_install:852148: paes: newpath , element list </OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/index.html>
1.0-nodejs-18-install/temp/log.do_install:852148: element to add: 'index.html'
1.0-nodejs-18-install/temp/log.do_install:852148: pae: '/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test', + 'index.html', is_dir 1
1.0-nodejs-18-install/temp/log.do_install:852148: paes: append_element gave us '/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/index.html', current ''
1.0-nodejs-18-install/temp/log.do_install:852148: <nil> + /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/index.html => </OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/
image/test/index.html>
1.0-nodejs-18-install/temp/log.do_install:852148: base_path[follow]: <nil></>/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/index.html => /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webo
s.app.minimal/1.0/image/test/index.html
1.0-nodejs-18-install/temp/log.do_install:852148: root_path [open64, 11133]: '/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/index.html' from '/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com
.webos.app.minimal/1.0/image/test/index.html'
1.0-nodejs-18-install/temp/log.do_install:852148: openat_creat: /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/index.html -> 0644
1.0-nodejs-18-install/temp/log.do_install:852148: openat(path /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/index.html), flags 2001101, stat rc 0, stat mode 100644
1.0-nodejs-18-install/temp/log.do_install:852148: creat /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/index.html (+buf) (0100644): processing request [ino 52571022]
1.0-nodejs-18-install/temp/log.do_install:852148: msg type 6 (creat), external path /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/index.html, mode 0100644
1.0-nodejs-18-install/temp/log.do_install:852148: open /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/index.html [fd 23] (+buf) [dev/ino: 66305/52571022] (0100644): processing request [ino 52571022

The files _were_ installed by enactjs.pack and are identical:

martin@jama /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal $ diff -rq 1.0-nodejs-*-install/image
martin@jama /OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal $ ll 1.0-nodejs-*-install/image/test/
1.0-nodejs-18-install/image/test/:
total 228K
drwxr-xr-x 2 martin martin 4.0K Oct 17 20:20 .
drwxr-xr-x 3 martin martin 4.0K Oct 17 20:20 ..
-rw-r--r-- 1 martin martin  356 Oct 17 20:20 index.html
-rw-r--r-- 1 martin martin 127K Oct 17 20:20 main.js
-rw-r--r-- 1 martin martin  86K Oct 17 20:20 main.js.map

1.0-nodejs-20-install/image/test/:
total 228K
drwxr-xr-x 2 martin martin 4.0K Oct 17 20:19 .
drwxr-xr-x 3 martin martin 4.0K Oct 17 20:19 ..
-rw-r--r-- 1 martin martin  356 Oct 17 20:19 index.html
-rw-r--r-- 1 martin martin 127K Oct 17 20:19 main.js
-rw-r--r-- 1 martin martin  86K Oct 17 20:19 main.js.map

Even with strace -f -v in the recipe it just emits main.js like magic with nodejs-20:

com.webos.app.minimal $ grep main.js 1.0-nodejs-*-strace-f/temp/log.do_install
1.0-nodejs-18-strace-f/temp/log.do_install:[pid 907113] statx(AT_FDCWD, "/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/main.js", AT_STATX_SYNC_AS_STAT, STATX_ALL,  <unfinished ...>
1.0-nodejs-18-strace-f/temp/log.do_install:[pid 907114] lstat("/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/main.js", 0x7fe861ffaa00) = -1 ENOENT (No such file or directory)
1.0-nodejs-18-strace-f/temp/log.do_install:[pid 907114] newfstatat(AT_FDCWD, "/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/main.js", 0x7fe861ffaa60, 0) = -1 ENOENT (No such file or directory)
1.0-nodejs-18-strace-f/temp/log.do_install:[pid 907114] newfstatat(AT_FDCWD, "/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/main.js", 0x7fe861ffaa60, 0) = -1 ENOENT (No such file or directory)
1.0-nodejs-18-strace-f/temp/log.do_install:[pid 907114] openat(AT_FDCWD, "/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/main.js", O_WRONLY|O_CREAT|O_TRUNC|O_CLOEXEC, 0644) = 18
1.0-nodejs-18-strace-f/temp/log.do_install:[pid 907114] newfstatat(AT_FDCWD, "/OE/build/oe-core/tmp-glibc/work/core2-64-oe-linux/com.webos.app.minimal/1.0/image/test/main.js", {st_dev=makedev(0x103, 0x1), st_ino=51299015, st_mode=S_IFREG|
0644, st_nlink=1, st_uid=1026, st_gid=1026, st_blksize=4096, st_blocks=0, st_size=0, st_atime=1697573872 /* 2023-10-17T20:17:52.356749322+0000 */, st_atime_nsec=356749322, st_mtime=1697573872 /* 2023-10-17T20:17:52.356749322+0000 */, st_m
time_nsec=356749322, st_ctime=1697573872 /* 2023-10-17T20:17:52.356749322+0000 */, st_ctime_nsec=356749322}, 0) = 0
1.0-nodejs-18-strace-f/temp/log.do_install:[pid 907105] write(1, "asset main.js 0 bytes [emitted] "..., 482) = 482
1.0-nodejs-18-strace-f/temp/log.do_install:asset main.js 0 bytes [emitted] [minimized] (name: main)

1.0-nodejs-20-strace-f/temp/log.do_install:asset main.js 0 bytes [emitted] [minimized] (name: main)
1.0-nodejs-20-strace-f/temp/log.do_install:[pid 904185] write(1, "asset main.js 0 bytes [emitted] "..., 482) = 482
